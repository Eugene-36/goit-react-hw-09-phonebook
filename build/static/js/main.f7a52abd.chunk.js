(this["webpackJsonpreact-1"]=this["webpackJsonpreact-1"]||[]).push([[0],{11:function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return q})),n.d(t,"c",(function(){return w.a}));var r,c,o,u,a=n(2),s=Object(a.b)("auth/registerRequest"),i=Object(a.b)("auth/registerSuccess"),b=Object(a.b)("auth/registerError"),d=Object(a.b)("auth/loginRequest"),l=Object(a.b)("auth/loginSuccess"),j=Object(a.b)("auth/loginError"),O={registerRequest:s,registerSuccess:i,registerError:b,logoutRequest:Object(a.b)("auth/logoutRequest"),logoutSuccess:Object(a.b)("auth/logoutSuccess"),logoutError:Object(a.b)("auth/logoutError"),loginRequest:d,loginSuccess:l,loginError:j,getCurrentUserRequest:Object(a.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(a.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(a.b)("auth/getCurrentUserError")},f=n(3),g=n(6),h={name:null,email:null},p=Object(a.c)(h,(r={},Object(f.a)(r,O.registerSuccess,(function(e,t){return t.payload.user})),Object(f.a)(r,O.loginSuccess,(function(e,t){return t.payload.user})),Object(f.a)(r,O.logoutSuccess,(function(){return h})),Object(f.a)(r,O.getCurrentUserSuccess,(function(e,t){return t.payload})),r)),x=Object(a.c)(null,(c={},Object(f.a)(c,O.registerSuccess,(function(e,t){return t.payload.token})),Object(f.a)(c,O.loginSuccess,(function(e,t){return t.payload.token})),Object(f.a)(c,O.logoutSuccess,(function(){return null})),c)),v=function(e,t){return t.payload},m=Object(a.c)(null,(o={},Object(f.a)(o,O.registerError,v),Object(f.a)(o,O.loginError,v),Object(f.a)(o,O.logoutError,v),Object(f.a)(o,O.getCurrentUserRequest,v),o)),k=Object(a.c)(!1,(u={},Object(f.a)(u,O.registerSuccess,(function(){return!0})),Object(f.a)(u,O.loginSuccess,(function(){return!0})),Object(f.a)(u,O.getCurrentUserSuccess,(function(){return!0})),Object(f.a)(u,O.registerError,!1),Object(f.a)(u,O.loginError,!1),Object(f.a)(u,O.getCurrentUserError,!1),Object(f.a)(u,O.logoutSuccess,(function(){return!1})),u)),y=Object(g.c)({user:p,isAuthenticated:k,token:x,error:m}),S=n(17),T=n.n(S),E=n(23),A=n(16),C=n.n(A);C.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var R=function(e){C.a.defaults.headers.common.Authorization="Bearer ".concat(e)},U=function(){C.a.defaults.headers.common.Authorization=""},q={register:function(e){return function(){var t=Object(E.a)(T.a.mark((function t(n){var r;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(O.registerRequest()),t.prev=1,t.next=4,C.a.post("/users/signup",e);case 4:r=t.sent,R(r.data.token),n(O.registerSuccess(r.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(O.registerError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(e){return function(){var t=Object(E.a)(T.a.mark((function t(n){var r;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(O.loginRequest()),t.prev=1,t.next=4,C.a.post("/users/login",e);case 4:r=t.sent,R(r.data.token),n(O.loginSuccess(r.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(O.loginError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logOut:function(){return function(){var e=Object(E.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(O.logoutRequest()),e.prev=1,e.next=4,C.a.post("/users/logout");case 4:U(),t(O.logoutSuccess()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(O.logoutError(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(E.a)(T.a.mark((function e(t,n){var r,c,o;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),c=r.auth.token){e.next=3;break}return e.abrupt("return");case 3:return R(c),t(O.getCurrentUserRequest()),e.prev=5,e.next=8,C.a.get("/users/current");case 8:o=e.sent,t(O.getCurrentUserSuccess(o.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t(O.getCurrentUserError(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}()}},w=n(26)},26:function(e,t,n){"use strict";t.a={getisAuthenticated:function(e){return e.auth.isAuthenticated},getUserName:function(e){return e.auth.user.name}}},39:function(e,t,n){"use strict";var r=n(16),c=n.n(r),o=n(7);t.a={addTodo:function(e){return function(t){t(o.b.addTodoRequest()),c.a.post("/contacts",e).then((function(e){var n=e.data;return t(o.b.addTodoSuccess(n))})).catch((function(e){return t(o.b.addTodoError(e.message))}))}},deleteTodo:function(e){return function(t){t(o.b.deleteTodoRequest()),c.a.delete("/contacts/".concat(e)).then((function(){return t(o.b.deleteTodoSuccess(e))})).catch((function(e){return t(o.b.deleteTodoError(e.message))}))}}}},40:function(e,t,n){"use strict";var r=n(21),c=function(e){return e.allUsers.filter},o=Object(r.a)([function(e){return e.allUsers.contacts},c],(function(e,t){var n=t.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(n)}))}));t.a={getFilter:c,getVisibleContacts:o}},41:function(e,t,n){"use strict";n.d(t,"c",(function(){return o.a})),n.d(t,"d",(function(){return u.a})),n.d(t,"a",(function(){return a.a})),n.d(t,"b",(function(){return k}));var r,c,o=n(39),u=n(40),a=n(7),s=n(3),i=n(27),b=n(6),d=n(2),l=a.b.addTodoRequest,j=a.b.addTodoSuccess,O=a.b.addTodoError,f=a.b.deleteTodoRequest,g=a.b.deleteTodoSuccess,h=a.b.deleteTodoError,p=a.b.changeFilter,x=Object(d.c)([],(r={},Object(s.a)(r,j,(function(e,t){var n=t.payload;return[].concat(Object(i.a)(e),[n])})),Object(s.a)(r,g,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),r)),v=Object(d.c)(!1,(c={},Object(s.a)(c,l,(function(){return!0})),Object(s.a)(c,j,(function(){return!1})),Object(s.a)(c,O,(function(){return!1})),Object(s.a)(c,f,(function(){return!0})),Object(s.a)(c,g,(function(){return!1})),Object(s.a)(c,h,(function(){return!1})),c)),m=Object(d.c)("",Object(s.a)({},p,(function(e,t){return t.payload}))),k=Object(b.c)({contacts:x,filter:m,loading:v})},58:function(e,t,n){},59:function(e,t,n){},7:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(2),c=Object(r.b)("contacts/addTodoRequest"),o=Object(r.b)("contacts/addTodoSuccess"),u=Object(r.b)("contacts/addTodoError"),a=Object(r.b)("contacts/deleteTodoRequest"),s=Object(r.b)("contacts/deleteTodoSuccess"),i=Object(r.b)("contacts/deleteTodoError"),b=Object(r.b)("CHANGE_FILTER");t.b={addTodoRequest:c,addTodoSuccess:o,addTodoError:u,deleteTodoRequest:a,deleteTodoSuccess:s,deleteTodoError:i,changeFilter:b}},87:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),o=n(24),u=n.n(o),a=(n(58),n(35)),s=n(36),i=n(38),b=n(37),d=(n(59),n(5)),l=n(8),j=n(15),O=n(11),f=n(1),g={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},h=Object(l.b)((function(e){return{isAuthenticated:O.c.getisAuthenticated(e)}}))((function(e){var t=e.isAuthenticated;return Object(f.jsxs)("nav",{children:[Object(f.jsx)(j.b,{to:"/",exact:!0,style:g.link,activeStyle:g.activeLink,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),t&&Object(f.jsx)(j.b,{to:"/todos",exact:!0,style:g.link,activeStyle:g.activeLink,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})]})})),p=n.p+"static/media/peppa-8.b89015db.jpg",x={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12}},v={onLogout:O.a.logOut},m=Object(l.b)((function(e){return{name:O.c.getUserName(e),avatar:p}}),v)((function(e){var t=e.avatar,n=e.name,r=e.onLogout;return Object(f.jsxs)("div",{style:x.container,children:[Object(f.jsx)("img",{src:t,alt:"",width:"32",style:x.avatar}),Object(f.jsxs)("span",{style:x.name,children:["Welcome, ",n]}),Object(f.jsx)("button",{type:"button",onClick:r,children:"Logout"})]})})),k={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},y=function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)(j.b,{to:"/register",exact:!0,style:k.link,activeStyle:k.activeLink,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(f.jsx)(j.b,{to:"/login",exact:!0,style:k.link,activeStyle:k.activeLink,children:"\u041b\u043e\u0433\u0438\u043d"})]})},S={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"}},T=Object(l.b)((function(e){return{isAuthenticated:O.c.getisAuthenticated(e)}}))((function(e){var t=e.isAuthenticated;return Object(f.jsxs)("header",{style:S.header,children:[Object(f.jsx)(h,{}),t?Object(f.jsx)(m,{}):Object(f.jsx)(y,{})]})})),E=function(e){var t=e.children;return Object(f.jsx)("div",{className:"Container",children:t})},A=n(19),C=n(28),R=n(26),U=Object(l.b)((function(e){return{isAuthenticated:R.a.getisAuthenticated(e)}}))((function(e){var t=e.component,n=e.isAuthenticated,r=e.redirectTo,c=Object(C.a)(e,["component","isAuthenticated","redirectTo"]);return Object(f.jsx)(d.b,Object(A.a)(Object(A.a)({},c),{},{render:function(e){return n?Object(f.jsx)(t,Object(A.a)({},e)):Object(f.jsx)(d.a,{to:r})}}))})),q=Object(l.b)((function(e){return{isAuthenticated:O.c.getisAuthenticated(e)}}))((function(e){var t=e.component,n=e.isAuthenticated,r=e.redirectTo,c=Object(C.a)(e,["component","isAuthenticated","redirectTo"]);return Object(f.jsx)(d.b,Object(A.a)(Object(A.a)({},c),{},{render:function(e){return n&&c.restricted?Object(f.jsx)(d.a,{to:r}):Object(f.jsx)(t,Object(A.a)({},e))}}))})),w=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,106))})),L=Object(r.lazy)((function(){return n.e(6).then(n.bind(null,107))})),z=Object(r.lazy)((function(){return n.e(5).then(n.bind(null,108))})),B=Object(r.lazy)((function(){return n.e(3).then(n.bind(null,109))})),F=function(e){Object(i.a)(n,e);var t=Object(b.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.onCurrentUser()}},{key:"render",value:function(){return Object(f.jsxs)(E,{children:[Object(f.jsx)(T,{}),Object(f.jsx)(r.Suspense,{fallback:Object(f.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c..."}),children:Object(f.jsxs)(d.d,{children:[Object(f.jsx)(q,{exact:!0,path:"/",component:w}),Object(f.jsx)(q,{path:"/register",restricted:!0,component:L,redirectTo:"/todos"}),Object(f.jsx)(q,{path:"/login",component:z,restricted:!0,redirectTo:"/todos"}),Object(f.jsx)(U,{path:"/todos",redirectTo:"/login",component:B})]})})]})}}]),n}(r.Component),I={onCurrentUser:O.a.getCurrentUser},N=Object(l.b)(null,I)(F),W=n(51),D=n(27),J=n(2),M=n(52),G=n.n(M),H=n(41),V=n(18),_=n(53),K=n.n(_),P=[].concat(Object(D.a)(Object(J.d)({ignoredActions:[V.a,V.f,V.b,V.c,V.d,V.e],serializableCheck:!1})),[G.a,function(e){return function(e){return function(t){console.log("\u043c\u043e\u044f \u043f\u0440\u043e\u0441\u043b\u043e\u0439\u043a\u0430",t),e(t)}}}]),Q={key:"auth",storage:K.a,whitelist:["token"]},X=Object(J.a)({reducer:{allUsers:H.b,auth:Object(V.g)(Q,O.b)},middleware:P}),Y={store:X,persistor:Object(V.h)(X)};u.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(l.a,{store:Y.store,children:Object(f.jsx)(W.a,{loading:null,persistor:Y.persistor,children:Object(f.jsx)(j.a,{children:Object(f.jsx)(N,{})})})})}),document.getElementById("root"))}},[[87,1,2]]]);
//# sourceMappingURL=main.f7a52abd.chunk.js.map